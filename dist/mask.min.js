/*!
 * angular-ui-mask
 * https://github.com/angular-ui/ui-mask
 * Version: 1.8.6 - 2016-06-24T10:08:52.569Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,clearOnBlurPlaceholder:!1,escChar:"\\",eventsToHandle:["input","keyup","click","focus"],addDefaultPlaceholder:!0,allowInvalidValue:!1,valueMapper:function(e){return e},pasteMapper:function(e){return e}}).provider("uiMask.Config",function(){var e={};this.maskDefinitions=function(n){return e.maskDefinitions=n},this.clearOnBlur=function(n){return e.clearOnBlur=n},this.clearOnBlurPlaceholder=function(n){return e.clearOnBlurPlaceholder=n},this.eventsToHandle=function(n){return e.eventsToHandle=n},this.addDefaultPlaceholder=function(n){return e.addDefaultPlaceholder=n},this.allowInvalidValue=function(n){return e.allowInvalidValue=n},this.valueMapper=function(n){return e.valueMapper=n},this.pasteMapper=function(n){return e.pasteMapper=n},this.$get=["uiMaskConfig",function(n){var t=n;for(var a in e)angular.isObject(e[a])&&!angular.isArray(e[a])?angular.extend(t[a],e[a]):t[a]=e[a];return t}]}).directive("uiMask",["uiMask.Config",function(e){function n(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",scope:{valueMapper:"=",pasteMapper:"="},compile:function(){var t=angular.copy(e);return function(e,a,r,i){function l(e){return angular.isDefined(e)?(k(e),q?(h(),d(),!0):f()):f()}function u(e){e&&(B=e,!q||0===a.val().length&&angular.isDefined(r.placeholder)||a.val(m(g(a.val()))))}function o(){return l(r.uiMask)}function c(e){return q?(H=g(e||""),_=p(H),i.$setValidity("mask",_),H.length&&(_||Y.allowInvalidValue)?m(H):void 0):e}function s(e){return q?(H=g(e||""),_=p(H),i.$viewValue=H.length?m(H):"",i.$setValidity("mask",_),_||Y.allowInvalidValue?U(Q?i.$viewValue:H):void 0):e}function f(){return q=!1,v(),angular.isDefined(W)?a.attr("placeholder",W):a.removeAttr("placeholder"),angular.isDefined(G)?a.attr("maxlength",G):a.removeAttr("maxlength"),a.val(i.$modelValue),i.$viewValue=i.$modelValue,!1}function h(){H=N=g(i.$modelValue||""),R=F=m(H),_=p(H),r.maxlength&&a.attr("maxlength",2*A[A.length-1]),!W&&Y.addDefaultPlaceholder&&a.attr("placeholder",B);for(var e=i.$modelValue,n=i.$formatters.length;n--;)e=i.$formatters[n](e);i.$viewValue=e||"",i.$render()}function d(){K||(a.bind("blur",M),a.bind("mousedown mouseup",V),a.bind("keydown",O),a.bind("paste",y),a.bind(Y.eventsToHandle.join(" "),D),K=!0)}function v(){K&&(a.unbind("blur",M),a.unbind("mousedown",V),a.unbind("mouseup",V),a.unbind("keydown",O),a.unbind("paste",y),a.unbind("input",D),a.unbind("keyup",D),a.unbind("click",D),a.unbind("focus",D),K=!1)}function p(e){return e.length?e.length>=j:!0}function g(e){var n,t,r="",i=a[0],l=T.slice(),u=z,o=u+S(i),c="";return e=e.toString(),n=0,t=e.length-B.length,angular.forEach(I,function(a){var r=a.position;r>=u&&o>r||(r>=u&&(r+=t),e.substring(r,r+a.value.length)===a.value&&(c+=e.slice(n,r),n=r+a.value.length))}),e=c+e.slice(n),angular.forEach(e.split(""),function(e){l.length&&l[0].test(e)&&(r+=e,l.shift())}),r}function m(e){var n="",t=A.slice();return angular.forEach(B.split(""),function(a,r){e.length&&r===t[0]?(n+=e.charAt(0)||"_",e=e.substr(1),t.shift()):n+=a}),n}function b(e){var n,t=angular.isDefined(r.uiMaskPlaceholder)?r.uiMaskPlaceholder:r.placeholder;return angular.isDefined(t)&&t[e]?t[e]:(n=angular.isDefined(r.uiMaskPlaceholderChar)&&r.uiMaskPlaceholderChar?r.uiMaskPlaceholderChar:"_","space"===n.toLowerCase()?" ":n[0])}function w(){var e,n,t=B.split("");A&&!isNaN(A[0])&&angular.forEach(A,function(e){t[e]="_"}),e=t.join(""),n=e.replace(/[_]+/g,"_").split("_"),n=n.filter(function(e){return""!==e});var a=0;return n.map(function(n){var t=e.indexOf(n,a);return a=t+1,{value:n,position:t}})}function k(e){var n=0;if(A=[],T=[],B="",angular.isString(e)){j=0;var t=!1,a=0,r=e.split(""),i=!1;angular.forEach(r,function(e,r){i?(i=!1,B+=e,n++):Y.escChar===e?i=!0:Y.maskDefinitions[e]?(A.push(n),B+=b(r-a),T.push(Y.maskDefinitions[e]),n++,t||j++,t=!1):"?"===e?(t=!0,a++):(B+=e,n++)})}A.push(A.slice().pop()+1),I=w(),q=A.length>1?!0:!1}function M(){if((Y.clearOnBlur||Y.clearOnBlurPlaceholder&&0===H.length&&r.placeholder)&&(z=0,L=0,_&&0!==H.length||(R="",a.val(""),e.$apply(function(){i.$pristine||i.$setViewValue("")}))),H!==ee){var n=a.val(),t=""===H&&n&&angular.isDefined(r.uiMaskPlaceholderChar)&&"space"===r.uiMaskPlaceholderChar;t&&a.val(""),$(a[0]),t&&a.val(n)}ee=H}function $(e){var n;angular.isFunction(window.Event)&&!e.fireEvent?(n=new Event("change",{view:window,bubbles:!0,cancelable:!1}),e.dispatchEvent(n)):"createEvent"in document?(n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("onchange")}function y(e){var n=X(e.clipboardData.getData("Text"));setTimeout(function(){a.val(m(g(n)))},0)}function V(e){"mousedown"===e.type?a.bind("mouseout",E):a.unbind("mouseout",E)}function E(){L=S(this),a.unbind("mouseout",E)}function O(e){var n=8===e.which,t=P(this)-1||0;if(n){for(;t>=0;){if(x(t)){C(this,t+1);break}t--}Z=-1===t}}function D(n){n=n||{};var t=n.which,r=n.type;if(16!==t&&91!==t){var l,u=a.val(),o=F,c=!1,s=g(u),f=N,h=P(this)||0,d=z||0,v=h-d,p=A[0],b=A[s.length]||A.slice().shift(),w=L||0,k=S(this)>0,M=w>0,$=u.length>o.length||w&&u.length>o.length-w,y=u.length<o.length||w&&u.length===o.length-w,V=t>=37&&40>=t&&n.shiftKey,E=37===t,O=8===t||"keyup"!==r&&y&&-1===v,D=46===t||"keyup"!==r&&y&&0===v&&!M,T=(E||O||"click"===r)&&h>p;if(L=S(this),!V&&(!k||"click"!==r&&"keyup"!==r&&"focus"!==r)){if(O&&Z)return a.val(B),e.$apply(function(){i.$setViewValue("")}),void C(this,d);if("input"===r&&y&&!M&&s===f){for(;O&&h>p&&!x(h);)h--;for(;D&&b>h&&-1===A.indexOf(h);)h++;var I=A.indexOf(h);s=s.substring(0,I)+s.substring(I+1),s!==f&&(c=!0)}for(l=m(s),F=l,N=s,!c&&u.length>l.length&&(c=!0),a.val(l),c&&e.$apply(function(){i.$setViewValue(l)}),$&&p>=h&&(h=p+1),T&&h--,h=h>b?b:p>h?p:h;!x(h)&&h>p&&b>h;)h+=T?-1:1;(T&&b>h||$&&!x(d))&&h++,z=h,C(this,h)}}}function x(e){return A.indexOf(e)>-1}function P(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&n(a[0])){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function C(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)n(a[0])&&(e.focus(),e.setSelectionRange(t,t));else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",t),r.select()}}function S(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:window.getSelection?window.getSelection().toString().length:document.selection?document.selection.createRange().text.length:0:0}var A,T,B,I,j,H,R,_,F,N,z,L,Z,q=!1,K=!1,W=r.placeholder,G=r.maxlength,J=i.$isEmpty;i.$isEmpty=function(e){return J(q?g(e||""):e)};var Q=!1;r.$observe("modelViewValue",function(e){"true"===e&&(Q=!0)});var U=null;e.$watch("valueMapper",function(e){U="function"==typeof e?e:Y.valueMapper});var X=null;e.$watch("pasteMapper",function(e){X="function"==typeof e?e:Y.pasteMapper}),r.$observe("allowInvalidValue",function(e){Y.allowInvalidValue=""===e?!0:!!e,c(i.$modelValue)});var Y={};r.uiOptions?(Y=e.$eval("["+r.uiOptions+"]"),Y=angular.isObject(Y[0])?function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===n[t]?n[t]=angular.copy(e[t]):angular.isObject(n[t])&&!angular.isArray(n[t])&&(n[t]=angular.extend({},e[t],n[t])));return n}(t,Y[0]):t):Y=t,r.$observe("uiMask",l),angular.isDefined(r.uiMaskPlaceholder)?r.$observe("uiMaskPlaceholder",u):r.$observe("placeholder",u),angular.isDefined(r.uiMaskPlaceholderChar)&&r.$observe("uiMaskPlaceholderChar",o),i.$formatters.unshift(c),i.$parsers.unshift(s);var ee=a.val();a.bind("mousedown mouseup",V),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var a=0;if(arguments.length>1&&(a=Number(arguments[1]),a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=t)return-1;for(var r=a>=0?a:Math.max(t-Math.abs(a),0);t>r;r++)if(r in n&&n[r]===e)return r;return-1})}}}}])}();